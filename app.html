<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>gmex</title>
<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, Roboto;
}
.app {
  max-width: 480px;
  margin: 0 auto;
  padding-bottom: 70px;
  min-height: 100vh;
}
header {
  text-align: center;
  padding: 20px 0 10px;
  font-size: 24px;
  font-weight: 700;
}
main {
  padding: 15px;
}
.card {
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 15px;
  border-radius: 16px;
  margin-bottom: 15px;
}
.center { text-align:center; }
.btn-row { display:flex; justify-content:center; gap:12px; margin-bottom:20px; }
.ios-btn {
  padding: 14px 26px;
  border-radius: 14px;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.25);
  cursor: pointer;
  font-size: 16px;
}
.row {
  display:flex;
  justify-content:space-between;
  padding:10px 0;
  border-bottom:1px solid rgba(255,255,255,0.1);
}
nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  max-width: 480px;
  margin:0 auto;
  background: rgba(20,20,20,0.95);
  backdrop-filter: blur(16px);
  border-top:1px solid rgba(255,255,255,0.1);
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}
nav button {
  background:none;
  border:none;
  color:#aaa;
  font-size:13px;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
}
nav button.active { color:#fff; font-weight:600; }
.page { display:none; }
.page.active { display:block; }
input {
  width:100%;
  padding:10px;
  border-radius:10px;
  background: rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;
  margin-bottom:10px;
}
.primary-btn {
  padding:12px;
  background: rgba(255,255,255,0.2);
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.3);
  cursor:pointer;
  width:100%;
  margin-top:10px;
}
#modal {
  position:fixed;
  inset:0;
  background: rgba(0,0,0,0.65);
  display:none;
  align-items:center;
  justify-content:center;
}
#modal-content {
  background: rgba(255,255,255,0.08);
  padding:20px;
  border-radius:16px;
  width:90%;
  max-width:420px;
  backdrop-filter: blur(16px);
}
</style>
</head>
<body>

<div class="app">
<header>gmex</header>

<!-- –ì–ª–∞–≤–Ω–∞—è -->
<main class="page active" id="page-home">
  <div class="card center">
    <div class="btn-row">
      <div class="ios-btn" id="buy">–ö—É–ø–∏—Ç—å</div>
      <div class="ios-btn" id="sell">–ü—Ä–æ–¥–∞—Ç—å</div>
    </div>
    <div id="rate-time" style="color:#aaa;font-size:14px;margin-bottom:10px;">–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å ‚Äî</div>
    <div id="rate-usdt" style="font-size:24px;font-weight:700;margin-bottom:10px;">‚Äî ‚ÇΩ</div>
  </div>
  <div class="card">
    <div class="row">
      <div>USDT</div>
      <div id="price-buy">‚Äî ‚ÇΩ / –∫—É–ø–∏—Ç—å</div>
      <div id="price-sell">‚Äî ‚ÇΩ / –ø—Ä–æ–¥–∞—Ç—å</div>
    </div>
  </div>
  <div class="card">
    <div style="font-weight:700;margin-bottom:4px;">–û –Ω–∞—Å</div>
    <div style="color:#aaa;margin-bottom:10px;">–û—Ñ—Ñ–ª–∞–π–Ω –æ–±–º–µ–Ω–Ω–∏–∫ GMEX –≤ –î—É–±–∞–µ.</div>
    <button class="primary-btn" id="chat">–ß–∞—Ç @gadzhigg</button>
    <button class="primary-btn" id="policy">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button>
  </div>
</main>

<!-- –ò—Å—Ç–æ—Ä–∏—è -->
<main class="page" id="page-history">
  <div class="card">
    <div style="font-size:18px;font-weight:600;margin-bottom:10px;">–ò—Å—Ç–æ—Ä–∏—è üëÄ</div>
    <div id="history"></div>
  </div>
</main>

<!-- –õ–æ–∫–∞—Ü–∏—è -->
<main class="page" id="page-location">
  <div class="card center" style="height:60vh;font-size:40px;color:#777;">Soon‚Ä¶</div>
</main>

<!-- –ü—Ä–æ—Ñ–∏–ª—å -->
<main class="page" id="page-profile">
  <div class="card">
    <div style="font-size:18px;font-weight:600;margin-bottom:10px;">–ü—Ä–æ—Ñ–∏–ª—å</div>
    <input id="nick" placeholder="@nickname">
    <input id="phone" placeholder="+7 900 ...">
    <button class="primary-btn" id="save-profile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>
</main>

</div>

<!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
<nav>
  <button class="active" data-page="home">üè† –ì–ª–∞–≤–Ω–∞—è</button>
  <button data-page="history">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
  <button data-page="location">üìç –õ–æ–∫–∞—Ü–∏—è</button>
  <button data-page="profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
</nav>

<!-- –ú–æ–¥–∞–ª -->
<div id="modal">
  <div id="modal-content"></div>
</div>
<script>
// –ù–∞–≤–∏–≥–∞—Ü–∏—è
document.querySelectorAll("nav button").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    let page=btn.dataset.page;
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById("page-"+page).classList.add("active");
  };
});
// –ü—Ä–æ—Ñ–∏–ª—å
document.getElementById("save-profile").onclick=()=>{
  localStorage.setItem("gmex_profile", JSON.stringify({
    nick: document.getElementById("nick").value,
    phone: document.getElementById("phone").value
  }));
  alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ");
};

// –ò—Å—Ç–æ—Ä–∏—è
function loadHistory(){
  let h=JSON.parse(localStorage.getItem("gmex_history")||"[]");
let box=document.getElementById("history");
  box.innerHTML="";
  if(h.length===0){ box.innerHTML="<div style='color:#aaa'>–ù–µ—Ç –∑–∞—è–≤–æ–∫</div>"; return; }
  h.forEach(item=>{
    box.innerHTML+=`<div class="card"><div><b>${item.type}</b></div><div>${item.amount} ‚ÇΩ</div><div style="color:#aaa">${item.fio}</div><div style="color:#777;font-size:12px">${item.time}</div></div>`;
  });
}
loadHistory();
// –ú–æ–¥–∞–ª
function openModal(html){ document.getElementById("modal-content").innerHTML=html; document.getElementById("modal").style.display="flex"; }
document.getElementById("modal").onclick=e=>{ if(e.target.id==="modal") document.getElementById("modal").style.display="none"; };

// –ß–∞—Ç –∏ –ø–æ–ª–∏—Ç–∏–∫–∞
document.getElementById("chat").onclick=()=>window.open("https://t.me/gadzhigg","_blank");
document.getElementById("policy").onclick=()=>openModal(`<h2>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h2><p style="color:#ccc;">GMEX MiniApp</p><p style="color:#aaa;">–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ù–∏—á–µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–µ–∑ –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è.</p>`);

// –ö—É–ø–∏—Ç—å / –ü—Ä–æ–¥–∞—Ç—å
function openForm(type){
  document.getElementById("modal-content").innerHTML=`
    <h2>${type}</h2>
    <input id="fio" placeholder="–§–ò–û">
    <input id="amount" type="number" placeholder="–°—É–º–º–∞ (‚ÇΩ)">
    <label><input type="checkbox" id="agree"> –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π</label>
    <button class="primary-btn" id="send-form">${type}</button>
  `;
  document.getElementById("modal").style.display="flex";
  document.getElementById("send-form").onclick=()=>{
    let fio=document.getElementById("fio").value.trim();
    let amount=document.getElementById("amount").value.trim();
    let agree=document.getElementById("agree").checked;
    if(!fio||!amount||!agree){alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è"); return;}
    let h=JSON.parse(localStorage.getItem("gmex_history")||"[]");
    h.unshift({type:type,amount:amount,fio:fio,time:new Date().toLocaleString()});
    localStorage.setItem("gmex_history",JSON.stringify(h));
    let msg=encodeURIComponent(`GMEX\n–î–µ–π—Å—Ç–≤–∏–µ: ${type}\n–§–ò–û: ${fio}\n–°—É–º–º–∞: ${amount} ‚ÇΩ`);
    window.open("https://t.me/share/url?text="+msg,"_blank");
    document.getElementById("modal").style.display="none";
    loadHistory();
  };
}
document.getElementById("buy").onclick=()=>openForm("–ö—É–ø–∏—Ç—å");
document.getElementById("sell").onclick=()=>openForm("–ü—Ä–æ–¥–∞—Ç—å");
// –ö—É—Ä—Å USDT-RUB OKX
async function updateRate(){
  try{
    const resp=await fetch("https://www.okx.com/api/v5/market/ticker?instId=USDT-RUB");
    const js=await resp.json();
    if(js.data&&js.data.length>0){
      const last=parseFloat(js.data[0].last);
      const buy=(last*1.013).toFixed(2);
      const sell=(last*0.987).toFixed(2);
      document.getElementById('rate-usdt').textContent=last.toFixed(2)+' ‚ÇΩ';
      document.getElementById('rate-time').textContent='–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –Ω–∞ '+new Date().toLocaleTimeString();
      document.getElementById('price-buy').textContent=buy+' ‚ÇΩ / –∫—É–ø–∏—Ç—å';
      document.getElementById('price-sell').textContent=sell+' ‚ÇΩ / –ø—Ä–æ–¥–∞—Ç—å';
    }
  }catch(e){ console.log("–û—à–∏–±–∫–∞ –∫—É—Ä—Å–∞:",e); document.getElementById('rate-usdt').textContent="–û—à–∏–±–∫–∞"; }
}
updateRate();
setInterval(updateRate,20000);
</script>

</body>
</html>